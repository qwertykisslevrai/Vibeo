<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Profil</title>
<style>
body{font-family:Arial;background:#f2f2f2;padding:20px}
.box{background:white;padding:20px;border-radius:10px}
.card{background:white;padding:15px;margin:15px auto;border-radius:10px;max-width:700px}
iframe{width:100%;height:390px;border:none;border-radius:10px}
</style>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getFirestore, collection, query, where, getDocs } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAQkCNtVCzXyIFLNlj9iKQvaMcg197zpKY",
  authDomain: "tttt-57bdb.firebaseapp.com",
  projectId: "tttt-57bdb",
  storageBucket: "tttt-57bdb.firebasestorage.app",
  messagingSenderId: "136572123296",
  appId: "1:136572123296:web:886d093854c6827f10b1c5",
  measurementId: "G-3E8ZVGPDTX"
};


const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const uid = new URLSearchParams(location.search).get("uid");

const q = query(collection(db,"videos"),where("authorUid","==",uid));
const snap = await getDocs(q);

let email = "";

snap.forEach(d=>{
  const v=d.data();
  email=v.authorEmail;
  const div=document.createElement("div");
  div.className="card";
  div.innerHTML=`
    <h3>${v.title}</h3>
    <iframe src="${v.url}" allow="autoplay; fullscreen" allowfullscreen></iframe>
    <p>${v.views} vues</p>
  `;
  videos.appendChild(div);
});

emailSpan.textContent = email;
</script>
</head>

<body>

<div class="box">
<h2>Profil utilisateur</h2>
<p>Email : <span id="emailSpan"></span></p>
<a href="videos.html">‚Üê Retour</a>
</div>

<div id="videos"></div>

</body>
</html>